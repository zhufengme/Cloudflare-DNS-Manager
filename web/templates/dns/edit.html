<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloudflare DNS Manager</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/zones">Cloudflare DNS Manager</a>
            <div class="d-flex">
                <a href="/logout" class="btn btn-outline-light btn-sm">退出</a>
            </div>
        </div>
    </nav>

<main role="main" class="container my-4">
<h2>编辑 DNS 记录 - {{.Domain}}</h2>

{{if .Error}}
<div class="alert alert-danger">{{.Error}}</div>
{{end}}

<form method="POST" action="/dns/edit">
    <input type="hidden" name="zoneid" value="{{.ZoneID}}">
    <input type="hidden" name="domain" value="{{.Domain}}">
    <input type="hidden" name="recordid" value="{{.Record.ID}}">

    <div class="mb-3">
        <label class="form-label">记录类型</label>
        <input type="text" class="form-control" value="{{.Record.Type}}" disabled>
    </div>

    <div class="mb-3">
        <label class="form-label">名称</label>
        <input type="text" name="name" class="form-control" value="{{.Record.Name}}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">内容</label>
        <textarea name="content" class="form-control" rows="3" required>{{.Record.Content}}</textarea>
    </div>

    {{if eq .Record.Type "MX"}}
    <div class="mb-3">
        <label class="form-label">优先级</label>
        <input type="number" name="priority" class="form-control" value="{{.Record.Priority}}">
    </div>
    {{end}}

    <div class="mb-3">
        <label class="form-label">TTL</label>
        <select name="ttl" class="form-control">
            <option value="1" {{if eq .Record.TTL 1}}selected{{end}}>自动</option>
            <option value="120" {{if eq .Record.TTL 120}}selected{{end}}>2 分钟</option>
            <option value="300" {{if eq .Record.TTL 300}}selected{{end}}>5 分钟</option>
            <option value="600" {{if eq .Record.TTL 600}}selected{{end}}>10 分钟</option>
            <option value="1800" {{if eq .Record.TTL 1800}}selected{{end}}>30 分钟</option>
            <option value="3600" {{if eq .Record.TTL 3600}}selected{{end}}>1 小时</option>
            <option value="7200" {{if eq .Record.TTL 7200}}selected{{end}}>2 小时</option>
            <option value="18000" {{if eq .Record.TTL 18000}}selected{{end}}>5 小时</option>
            <option value="43200" {{if eq .Record.TTL 43200}}selected{{end}}>12 小时</option>
            <option value="86400" {{if eq .Record.TTL 86400}}selected{{end}}>1 天</option>
        </select>
    </div>

    {{if or (eq .Record.Type "A") (eq .Record.Type "AAAA") (eq .Record.Type "CNAME")}}
    <div class="mb-3">
        <div class="form-check">
            <input type="checkbox" name="proxied" value="true" class="form-check-input" id="proxied"
                   {{if .Record.Proxied}}checked{{end}}>
            <label class="form-check-label" for="proxied">
                启用 Cloudflare 代理（橙色云朵）
            </label>
        </div>
    </div>
    {{end}}

    <button type="submit" class="btn btn-primary">保存</button>
    <a href="/zone?zoneid={{.ZoneID}}&domain={{.Domain}}" class="btn btn-secondary">取消</a>
</form>
</main>

<script src="/static/js/htmx.min.js"></script>
<script src="/static/js/alpine.min.js"></script>
<script src="/static/js/chart.min.js"></script>
</body>
</html>
